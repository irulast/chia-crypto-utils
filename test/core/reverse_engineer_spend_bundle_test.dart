@Skip('Interacts with mainnet')
import 'package:chia_crypto_utils/chia_crypto_utils.dart';
import 'package:test/expect.dart';
import 'package:test/scaffolding.dart';

void main() async {
  final coinId = Bytes.fromHex(
    '0xc6bea28d7d6ccb64bdc6eef90743d2f7b9578224b35c98cec785447b6aabf004',
  );

  ChiaNetworkContextWrapper().registerNetworkContext(Network.mainnet);
  final fullNode = EnhancedChiaFullNodeInterface.fromUrl('FULL_NODE_URL');

  test('should construct spend bundle for coin', () async {
    final spendBundle = await SpendBundle.ofCoin(coinId, fullNode);

    final fetchedCoinSpends = await fullNode.getCoinSpendsByIds(
      spendBundle!.coinSpends.map((e) => e.coin.id).toList(),
    );

    for (final spendBundleCoinSpend in spendBundle.coinSpends) {
      expect(fetchedCoinSpends.containsValue(spendBundleCoinSpend), true);
    }
  });

  group('should construct tibetswap liquidity spend bundle from coin:', () {
    for (final coinId in liquiditySpendBundleIds) {
      test('$coinId', () async {
        final spendBundle = await SpendBundle.ofCoin(coinId, fullNode);

        final spendMap = spendBundle!.coinSpendMap;

        for (final expectedId in liquiditySpendBundleIds) {
          expect(spendMap.containsKey(expectedId), true);
        }
      });
    }
  });
}

final liquiditySpendBundleIds = [
  '518ae4441a95e3ff2cdd5e9ad73a056c035ab3b8d9c2748d0f5cd4010f74326c',
  '8d433d6c9d86280ca9671269ae0e8baccac44171c18b5d352592334c31a951ca',
  '6137aa330fe95729beadf57dc83d8811e3dcfcf4be3d8376627982255c9b7db5',
  '26d0e511ea93d57908cb743b1a9a8a01e97f1cd93f5968838620b342f0b1c647',
  'eb25956fb71409f9a7b0db47285ebeb8d3da14e60e2b037439a23bef3504a496',
  '84434f9ad4661d55d8c62ccc39616fd40ff77d1aa6b7f37c06001b48c5cbb182',
  '4a7f402f450ce388e71ca90df80fa9ba335ae223f115ba2390d1cbb3b13adb9a',
  '9c3de2f24e41fa2c904b09420548c29fe8f4eb424a2201e7127e1d2c4ac7a736',
  '030f3bb4c2e83bc704adf1e60c07c4c25ca92317c3fb21d2122d794a3c0db11b',
  'bc5f7b99965c2655c5dc99f17cf9ed4832a3cb9442d3efdb1afe91f0a0c5741b',
  '213a3ac1e0bb5074252b62d8f8c8fd73d03fd2e15d975bc93980e7ac364e466e',
  '541d540f7c4a066293fdb440858e9f70220c943bef4d2310f8753454b1c7e909',
  '082ef0b1b705010bb17221a547b07528fc779309442bcc048c6e7579be885f13',
  '6f2e6cf69c7861900ea3704a2eca9df783b59839f994c8f650f9f9ab22fd7e11',
  '72152cef4b2fcdbe8cb4adf0970c3d634120efaae1addbf9053abbf3abac909f',
  'c019405c3208f25a98bbce6f67372796619b60e088c118b76058c04bd965cc09',
  'f1dfde693d18d6a031d8f7b4ea65c2afe09c051afbd7b53a7543918a47d8a8ac',
  '1963cd3fccdf255bbafd003a05f7f365a852349a383a1c5062d7b2147da4ba1a',
  '6c79c08a3107ea67a55569c55cf7c9c308717403326d946dc50bfd3261c63a36',
  '85444ddab29d8999a718bb1903ef4d6627b36bc29daad8b265a12d55c3937820',
  'db55c6c06ea5f2f7b4b3b9ac5b7c2652ef464d429f293f135e252f9eb74aff65',
  '7d0657796c8af7b6bf4a134264d20dbda406b6896817d79a6c28c3fdcdb6ebcf',
  '59aa5f3488de578dcf3d414f06b448cc6db76449ead9cda5a168eff2910101c8',
  'ec0fe4301b985a0ad6a68b81beec4e9a6fa06c701e6d994fa8edb7a92d05d4b4',
  '98ee689adf29159fe5c790a4947fbd4e0c094e84e1aeb8a8fd97102e48eb85c6',
  '54dfee4b4d03aea9877a4c01c1caa1744793dc8dba973805451eb3e42e42d565',
  '4dca8884f63c66176a4a4e73a57fe2b4c9bb3bf636fe10a8f9945f117a64dfbe',
  'cf4f34c135b5216b3d797f351e39055b31f9976f9958a3b887a16490bf7694ba',
  '17ed0cc557604e8f8bc672e3c0a8e705662bd2a988a978ac7875318966610115',
  '7775c630f4e3d4d1414629de09b44f2dbe461b4e56edc1b840a0822e412d173f',
  '0d7ceb3da5c48f72534952804243b6b9b5739d1f90c1167661d42fb31a62a954',
  'c3c913938c4c1435c0f26ce98f092e08c1f6596a1def0a4f11db20f22302f422',
  '679032288fb8ab9f799833dc807144a286ea0bb3a7fd9b2e0b5d038b7500e1ef',
  'f07a862d7e79f766a84e9ca3c4856e2658cd9e8c6e318aec808d7d72f15e926b',
  '290566c4dade8a9c8c85b3c429eea91eb16ea48505267540317187b1c7dfed22',
  '9f1244e2b166b7165bdf48018c822bd8fbec7171b732cfce701aa0bff6d66132',
  '8f3dad7a50b8dd2b6793a40f5bbe47d120269acbe000919efd5898ad10192053',
  'aa6d39cd7fb92fd91de5636a77a14f760ad392a60c6f2404f4f140e233512751',
  'c8e50434443f65f880ec77718136a6c0b83b0ea0bd47d1f016c5dbcc931cb40b',
  '815a556e4e0995b7f02ef2b40922913a658fd7835fa7d79c415b85f573924ed2',
  '820fdd38b69f93f5ca26774a9592f1ff7ac5c3c282773577e1ba88661c7f7da7',
  'c3d80a2e09a5c2194b0c57a2c663a43c2a134324e1eeee057262f9e2f0b913ef',
  'edef7b0a681c017cd8ced5b618776964e85ea505db590416644e99608e238a2d',
  'd389e5f0ee16f310e682606dc5d4908c752184ebeb589c5f2504df0fbbd2a67d',
  '7000fb32f1a6080fc3ca253f0555b810f7c0fc90e38eb30533a3334223836ccc',
  '87c8ac4415d20108cae3908ce16d75fbbf3ddb536c7b0b488cead0b06be0a33f',
  '708d19636515895e1c5d48e48a4f5acd7e59a851667cf20a54f3eb5eec188205',
  '251fe1f2ab075bf89282b3512ac3e056d03d8e737109e59fe088c013a0439ad0',
  '6ca1b4548852204ad0ed2b47c99919fc40054e80afd001b93c8029255e03d9e3',
  '26c94e0776d8df2571850630d0066488e8668228a3050074a3cd5d6ab95ddee0',
  '76a8293699cc6f08de7dca14ffa12eee06b7f1abe12f0a031157695c124cd6c3',
  'b2c3080e24273e472dd7c8332c796d02f1fcda36ad090df6af3fd052425ae3be',
  'ecd2e0c08d257bd9ddc5cc73270b561d338a92c0c3fdc95eb01c9ee07783a69f',
  '80fecfa914e46da4e05e0da2381bbb68397f05cd09e1490250f8473ec2229015',
  '35f9757b510db26b22b5444f2a336e891426e3b4f24fb2ce06e93cc669dde86c',
  'd99c746a126120547d078a411e3a83ea79b5449e5dd63df8a46a72a7c5b06235',
  'a656da827495d1483547284fa3e6ec52ab678c2336ca6acfa52055fa53873ef9',
  'a8771c9367af04c26d2f61da67bae8e45ae21cb816beb5bf54992e9b9d180ef9',
  'fa8f5dca91b6c32ddc6c87b5cf2b02abd5b9d5fd1858653b6a6d0f00e8a093c7',
  'ccc99b154e6e58960db54f953c4b820cc525ea2d4a5d079de2f1dee74067d396',
  '31bf1fde53df5cbe902cb65224d200dd8943b779ba4fb88c30256bcb1907102e',
  '298255a7f945a40c739d08c77875b32a8ebe8baefed3fd3d50645fe1e09f6157',
  '58fa643fd69526c025cfc050f5b29b88986adaa84a1b17f2e59ff601a7748593',
  'a7d2895c1fe3a5dfa0c14ede5e2bd1c7e0a1bc40f9e3639c74a8dffdfec5cf7d',
  'cef51357bd533f11b72270e379de68d5df231eb2c15695cb9030a651e9044fb5',
  '94d28a9ccbb73d4dfaad9a950f595f22b5fff0e63d95f76cf27a061f1be1ab7b',
  '0b4d07d2f100a18e9fb4949b1bb6059b7c69f49e39ebe8cc8e9716d38fa7a31f',
  '87ae1369e6845939c5a1913b24a7dd4c3a9db5e70962b93680c8b4df1e8df72b',
  '0fc9fad7fe198c391e203e4ff844f7c0f587624fbf2bcf6325afdfcc6d42251b',
  'ab7fa8de6aabd408ab1bf34c788a6bb9ad894cf24b2f3645e95ec5a0cb0ab2a5',
  '872ee02bde7af741f66e9370ab1da6440f62e4d755965385e4ea28b89415426e',
  '4508d44a991666c026d9ebea0e07f1dfd671980959465241e0097cb893064576',
  '275a54baf0b2808a515306f317e214be249e71dc9843e10418d92079496657a8',
  '3a17c16dd45ca79413e684e44bd8cba49b3b31e7b084db0207e2a696903a086d',
  'd15cab6c20b0481a29c360e4adddedd8a194c382657ad876bbd5076aaac1411f',
  '0371c95c026a98f40b0df7ae47083666b7677c8c2d495aab2868f5167f2baa0b',
  '431bfa324d48651b7d38177a8f1a527abb34544812f79ee30a0133c3af82b0f5',
  'e9c65a53431dea7ba6773598b124fc227cac95eb1473d5e73a11bb3e1737371b',
  '47d2dec45a011e54f21d52d74b9b399b55daa9617c97c364a234529fcb6e6dd4',
  'bb8d942917cee461283c0f9bf15e3ba08edbe71a80685840003a9c7c56462b49',
  '0403d769a156009a4367de6bb77b22e0a96f1c76d43b05d8a7f03680a89ba2b7',
  '5c1519b9f9e515ffcc8fc69cac068021bcc4b7b7a51a8338fe6d85101c6918b0',
  'e7d7b568abd0904fa099892e006f6abcac55a46117c7147542f362a2cfbcd8c9',
  'daa180492aa9919e6fd643be6c1cefc5acdc3cc08f02096d72502ae1124859b4',
  '51819f7e904f53bd6d9e0c130bb7eaa70bb276463a717ff781bb6e7864c0d35f',
  '6db74ba76febbf9a5855d9ff85c41dc1798e058035a7bc6702767753aa23f4fe',
  '5f4f198e174e95c0b7b076490f878f198add45fffb6332b007b2f54f4fd202fc',
  '559bf2c8e79e73de1f2ad767571e6c61f534f33c295296c8a91cc4843a39d092',
  'f7c26eed2d1c3b9b534729c61a479f3646cadb93630ac81607846a002d3fa24c',
  '53a31d6b582efaefe47d3a1706b93c52c732b48b11da5467c3bfb7d65d099f8e',
  '8733c94413b71029d09286b8f7fd23ea960afacc19573c34c06c20a005a8c2c6',
  '97d73c6bb4ddfcd2cab4d24409096b0476b29188ba2fef764d2cdf91a32d34c2',
  '346dfdc7a447f2d11166bfee9803b59454db83fbed787c7b6ac0ad12552c7353',
  '280607cd6b4857fb674a96a71cb4dea47a0da0abae2588d75d9954ad01620d38',
  '5765dbde19f2a10c19cc1d2c30a3611218518df0905510ff56c3c380222f2064',
  '2e7429d6812566cbc7ec6198deefdada34274a74f1125701969013757a161f14',
  '575981c045d10246cab4300a75389a6993e7eb4b1c7e89e43de51772ddb8c28d',
].map(Bytes.fromHex).toSet();
